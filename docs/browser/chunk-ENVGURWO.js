import{a as H}from"./chunk-R7BSPXAI.js";import{i as _e,j as ue,o as be,p as he,q as xe,r as ve}from"./chunk-G3PTTXXN.js";import{a as N,b as y,d as D,e as ce,f as W,h as P,i as $,j as de,k as se,l as me,m as pe,s as ge,t as fe}from"./chunk-SH46SFHZ.js";import{a as Y}from"./chunk-MVQTKQMG.js";import"./chunk-Q64FFBLU.js";import{k as Ce,l as ye,m as Pe,p as we}from"./chunk-R27I6JGZ.js";import{a as ne,h as oe,j as ae,k as re,l as q,m as Q,n as le}from"./chunk-B5RPMYKJ.js";import{$b as K,Ab as B,Bb as U,Db as C,Gb as s,Hb as p,Hc as V,Ic as z,Lc as ie,Rb as a,Sa as k,Sb as u,Tb as h,Ub as E,Va as l,Vb as R,Wa as M,Wb as I,Xb as T,Z,_ as L,ac as v,bc as S,ca as ee,cc as O,ia as F,ja as j,mb as b,ob as m,ra as g,sa as f,sb as te,xb as i,yb as n,zb as d}from"./chunk-UIR4HCCT.js";var Fe=r=>["../manage-room",r];function Ve(r,_){r&1&&(i(0,"tbody")(1,"tr")(2,"td",42)(3,"div",43)(4,"span",44),a(5,"Loading..."),n()(),i(6,"p",45),a(7,"Loading rooms . . ."),n()()()())}function ze(r,_){if(r&1){let e=C();i(0,"tr",47)(1,"td"),d(2,"img",48),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),n(),i(7,"td"),a(8),n(),i(9,"td"),a(10),n(),i(11,"td")(12,"button",49),s("click",function(){let t=g(e).$implicit,c=p(3);return f(c.getSpecificRoomDetails(t._id))}),d(13,"i",50),n(),i(14,"button",51),d(15,"i",52),n(),i(16,"button",53),s("click",function(){let t=g(e).$implicit,c=p(3);return f(c.deleteRoom(t._id))}),d(17,"i",54),n()()()}if(r&2){let e=_.$implicit,o=p(3);l(2),m("src",e.images[0],k),l(2),u(e.roomNumber),l(2),u(o.calculateDiscountedPrice(e.price,e.discount).toFixed(0)),l(2),u(e.discount),l(2),u(e.capacity),l(4),m("routerLink",K(6,Fe,e._id))}}function Ne(r,_){if(r&1&&(i(0,"tbody"),b(1,ze,18,8,"tr",46),v(2,"searchRooms"),n()),r&2){let e=p(2);l(),m("ngForOf",O(2,1,e.rooms,e.searchInput))}}function De(r,_){if(r&1&&(B(0),b(1,Ne,3,4,"tbody",15),U()),r&2){let e=p();l(),m("ngIf",!e.isLoading)}}function Ae(r,_){r&1&&(i(0,"div",55)(1,"div",43)(2,"span",44),a(3,"Loading..."),n()(),i(4,"p",56),a(5,"Loading rooms . . ."),n()())}function Le(r,_){if(r&1){let e=C();i(0,"div",58)(1,"div",59),d(2,"img",60),i(3,"span",61),a(4),n()(),i(5,"div",62)(6,"div",63)(7,"p"),d(8,"i",64),a(9),n(),i(10,"p"),d(11,"i",65),a(12),n(),i(13,"p"),d(14,"i",66),a(15),n(),i(16,"p"),d(17,"i",67),a(18),n()(),i(19,"div",68),s("click",function(){let t=g(e).$implicit,c=p(2);return f(c.deleteRoom(t._id))}),i(20,"button",69),s("click",function(){let t=g(e).$implicit,c=p(2);return f(c.getSpecificRoomDetails(t._id))}),d(21,"i",50),a(22," View "),n(),i(23,"button",70),d(24,"i",52),a(25," Edit "),n(),i(26,"button",71),d(27,"i",50),a(28," Delete "),n()()()()}if(r&2){let e=_.$implicit;l(2),m("src",e.images[0],k),l(2),h(" ",e.roomNumber,""),l(5),h("Price: ",e.price,""),l(3),h("Discount: ",e.discount,"%"),l(3),h("Capacity: ",e.capacity,""),l(3),h("User: ",e.createdBy.userName,""),l(5),m("routerLink",K(7,Fe,e._id))}}function je(r,_){if(r&1&&(i(0,"div"),b(1,Le,29,9,"div",57),v(2,"searchRooms"),n()),r&2){let e=p();l(),m("ngForOf",O(2,1,e.rooms,e.searchInput))}}function Be(r,_){if(r&1&&(i(0,"div",82)(1,"div",83),d(2,"img",84),i(3,"h4",85),a(4),n()(),i(5,"div",86)(6,"div",87)(7,"span",88),d(8,"i",89),a(9,"Room ID:"),n(),i(10,"span",90),a(11),n()(),i(12,"div",87)(13,"span",88),d(14,"i",91),a(15,"Price:"),n(),i(16,"span",90),a(17),n()(),i(18,"div",87)(19,"span",88),d(20,"i",92),a(21,"Capacity:"),n(),i(22,"span",90),a(23),n()(),i(24,"div",87)(25,"span",88),d(26,"i",93),a(27,"Discount:"),n(),i(28,"span",90),a(29),n()(),i(30,"div",87)(31,"span",88),d(32,"i",94),a(33,"Created By:"),n(),i(34,"span",90),a(35),n()()()()),r&2){let e=p(2);l(2),m("src",e.selectedRoom.images[0],k),l(2),u(e.selectedRoom.roomNumber),l(7),u(e.selectedRoom._id),l(6),u(e.selectedRoom.price),l(6),u(e.selectedRoom.capacity),l(6),h("",e.selectedRoom.discount,"%"),l(6),u(e.selectedRoom.createdBy.userName)}}function Ue(r,_){if(r&1){let e=C();i(0,"div",72)(1,"div",73),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n(),i(2,"div",74)(3,"div",75)(4,"div",76)(5,"h5",77),a(6,"Room Details"),n(),i(7,"button",78),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n()(),b(8,Be,36,7,"div",79),i(9,"div",80)(10,"button",81),s("click",function(){g(e);let t=p();return f(t.closeModal())}),a(11,"Close"),n()()()()()}if(r&2){let e=p();l(8),m("ngIf",e.selectedRoom)}}var ke=(()=>{class r{constructor(e){this._RoomsService=e,this.searchInput="",this.rooms=[],this.isLoading=!1,this.showModal=!1,this.currentPage=1,this.itemsPerPage=10,this.pages=[],this.totalNumOfRooms=0,this.startItem=1,this.endItem=10,this.roomId=""}ngOnInit(){this.getALlRooms()}initForm(){this.roomForm=new W({roomNumber:new P(null,[y.required]),name:new P(null,[y.required]),price:new P(null,[y.required]),capacity:new P(null,[y.required]),discount:new P(null,[y.required]),facilities:new P(null,[y.required])})}getALlRooms(){this.isLoading=!0;let e={size:this.itemsPerPage,page:this.currentPage};this._RoomsService.getAllRooms(e).subscribe({next:o=>{o.success&&(this.rooms=o.data.rooms,this.totalNumOfRooms=o.data.totalCount,this.calculatePagination(),this.updateItemRange()),this.isLoading=!1},error:o=>{console.log(o),this.isLoading=!1}})}getSpecificRoomDetails(e){this._RoomsService.getRoomById(e).subscribe({next:o=>{console.log("Room",o),o.success&&(this.selectedRoom=o.data.room,console.log(this.selectedRoom),this.showModal=!0)},error:o=>{console.log(o)}})}deleteRoom(e){this._RoomsService.deleteRoom(e).subscribe({next:o=>{console.log(o),this.getALlRooms()},error:o=>{console.log(o)}})}calculateDiscountedPrice(e,o){return e-e*o/100}closeModal(){this.showModal=!1}calculatePagination(){this.totalPages=Math.ceil(this.totalNumOfRooms/this.itemsPerPage),this.pages=Array.from({length:this.totalPages},(e,o)=>o+1)}updateItemRange(){this.startItem=(this.currentPage-1)*this.itemsPerPage+1,this.endItem=Math.min(this.currentPage*this.itemsPerPage,this.totalNumOfRooms)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.getALlRooms())}previousPage(){this.currentPage>1&&(this.currentPage--,this.getALlRooms())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.getALlRooms())}changePageSize(e){this.itemsPerPage=e,this.currentPage=1,this.getALlRooms()}static{this.\u0275fac=function(o){return new(o||r)(M(H))}}static{this.\u0275cmp=F({type:r,selectors:[["app-rooms"]],decls:91,vars:21,consts:[[1,"filters-container"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-4"],[1,"title"],[1,"font-xl","font-bold","text-center"],[1,"col-md-6","d-flex","justify-content-end"],[1,"search-box"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Search for a room using room number",1,"search-input",3,"ngModelChange","ngModel"],[1,"btn-add-room"],["routerLink","../manage-room","routerLinkActive","router-link-active",1,"btn","btn-primary"],[1,"table-responsive","mt-4","d-none","d-md-block"],[1,"table","table-hover"],[1,"text-center"],[1,"font-md","font-simibold","text-white"],[4,"ngIf"],[1,"pagination-container","d-flex","justify-content-center","align-items-center","mt-4"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"dropdown"],["type","button","id","pageSizeDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","pageSizeDropdown",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"mx-4"],[1,"pagination-arrows"],[1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-chevron-right"],[1,"d-block","d-md-none"],["class","text-center py-4",4,"ngIf"],[1,"d-flex","flex-column","flex-sm-row","align-items-center"],[1,"d-flex","align-items-center","mb-2","mb-sm-0"],[1,"me-2","small"],["type","button","id","pageSizeDropdownMobile","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","pageSizeDropdownMobile",1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"mx-sm-4","small"],[1,"pagination-arrows","mt-2","mt-sm-0"],[1,"btn","btn-sm","btn-outline-secondary","me-2",3,"click","disabled"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],["class","custom-modal",4,"ngIf"],["colspan","5",1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","font-simibold","font-lg"],["class","room-row text-center",4,"ngFor","ngForOf"],[1,"room-row","text-center"],["alt","Room Image",1,"room-avatar","rounded-circle",3,"src"],[1,"me-2","btn","btn-outline-primary",3,"click"],[1,"fas","fa-eye"],[1,"me-2","btn","btn-outline-success",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"me-2","btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"text-center","py-4"],[1,"mt-2"],["class","room-card",4,"ngFor","ngForOf"],[1,"room-card"],[1,"room-card-header","d-flex","align-items-center"],["alt","Room Image",1,"room-avatar-sm","rounded-circle","me-3",3,"src"],[1,"room-id","text-white","font-bold"],[1,"room-card-body"],[1,"room-info"],[1,"fas","fa-dollar-sign"],[1,"fas","fa-percent"],[1,"fas","fa-users"],[1,"fas","fa-user"],[1,"room-actions","d-flex","justify-content-between","align-items-center",3,"click"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-success","me-2",3,"routerLink"],[1,"btn","btn-sm","btn-outline-danger","me-2"],[1,"custom-modal"],[1,"modal-backdrop",3,"click"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","font-simibold","font-lg"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[1,"modal-body"],[1,"text-center","mb-4"],["alt","Room Image",1,"room-modal-avatar","rounded-circle",3,"src"],[1,"mt-3","font-simibold","font-md"],[1,"room-details","mt-5"],[1,"detail-item"],[1,"detail-label"],[1,"fas","fa-id-card","me-2"],[1,"detail-value"],[1,"fas","fa-dollar-sign","me-2"],[1,"fas","fa-users","me-2"],[1,"fas","fa-percent","me-2"],[1,"fa-solid","fa-user-tie","me-2"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"Rooms Table Details"),n()()(),i(6,"div",5)(7,"div",6),d(8,"i",7),i(9,"input",8),T("ngModelChange",function(x){return I(t.searchInput,x)||(t.searchInput=x),x}),n()(),i(10,"div",9)(11,"button",10),a(12,"Add Room"),n()()()(),i(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13)(17,"th",14),a(18,"Room Image"),n(),i(19,"th",14),a(20,"Room Number"),n(),i(21,"th",14),a(22,"Price"),n(),i(23,"th",14),a(24,"Discount"),n(),i(25,"th",14),a(26,"Capacity"),n(),i(27,"th",14),a(28,"Actions"),n()()(),b(29,Ve,8,0,"tbody",15)(30,De,2,1,"ng-container",15),v(31,"searchRooms"),n(),i(32,"div",16)(33,"div",17)(34,"span",18),a(35,"Items per page:"),n(),i(36,"div",19)(37,"button",20),a(38),n(),i(39,"ul",21)(40,"li")(41,"a",22),s("click",function(){return t.changePageSize(5)}),a(42,"5"),n()(),i(43,"li")(44,"a",22),s("click",function(){return t.changePageSize(10)}),a(45,"10"),n()(),i(46,"li")(47,"a",22),s("click",function(){return t.changePageSize(20)}),a(48,"20"),n()(),i(49,"li")(50,"a",22),s("click",function(){return t.changePageSize(50)}),a(51,"50"),n()()()(),i(52,"span",23),a(53),n(),i(54,"div",24)(55,"button",25),s("click",function(){return t.previousPage()}),d(56,"i",26),n(),i(57,"button",27),s("click",function(){return t.nextPage()}),d(58,"i",28),n()()()()(),i(59,"div",29),b(60,Ae,6,0,"div",30)(61,je,3,4,"div",15),i(62,"div",16)(63,"div",31)(64,"div",32)(65,"span",33),a(66,"Items per page:"),n(),i(67,"div",19)(68,"button",34),a(69),n(),i(70,"ul",35)(71,"li")(72,"a",36),s("click",function(){return t.changePageSize(5)}),a(73,"5"),n()(),i(74,"li")(75,"a",36),s("click",function(){return t.changePageSize(10)}),a(76,"10"),n()(),i(77,"li")(78,"a",36),s("click",function(){return t.changePageSize(20)}),a(79,"20"),n()(),i(80,"li")(81,"a",36),s("click",function(){return t.changePageSize(50)}),a(82,"50"),n()()()()(),i(83,"span",37),a(84),n(),i(85,"div",38)(86,"button",39),s("click",function(){return t.previousPage()}),d(87,"i",26),n(),i(88,"button",40),s("click",function(){return t.nextPage()}),d(89,"i",28),n()()()()(),b(90,Ue,12,1,"div",41),n()),o&2&&(l(9),R("ngModel",t.searchInput),l(20),m("ngIf",t.isLoading),l(),m("ngIf",O(31,18,t.rooms,t.searchInput).length>0),l(8),h(" ",t.itemsPerPage," "),l(15),E("",t.startItem," \u2013 ",t.endItem," of ",t.totalNumOfRooms,""),l(2),m("disabled",t.currentPage===1),l(2),m("disabled",t.currentPage===t.totalPages),l(3),m("ngIf",t.isLoading),l(),m("ngIf",!t.isLoading),l(8),h(" ",t.itemsPerPage," "),l(15),E("",t.startItem," \u2013 ",t.endItem," of ",t.totalNumOfRooms,""),l(2),m("disabled",t.currentPage===1),l(2),m("disabled",t.currentPage===t.totalPages),l(2),m("ngIf",t.showModal))},dependencies:[V,z,re,q,N,D,$,Ce],styles:[".filters-container[_ngcontent-%COMP%]{padding:24px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 2px 10px #0000000d}.search-box[_ngcontent-%COMP%]{position:relative;width:60%}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:12px;color:#5a67d8}.search-input[_ngcontent-%COMP%]{width:70%;padding:10px 35px;border-radius:20px;border:1px solid #e2e8f0;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:#5a67d8;box-shadow:0 0 0 3px #5a67d833;outline:none}.search-input[_ngcontent-%COMP%]::placeholder{font-size:16px;color:#a0aec0}.btn-add-room[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#3498db;border-color:#3498db;padding:8px 16px;border-radius:8px;transition:all .3s ease}.btn-add-room[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#3498db;border-color:#3498db;transform:translateY(-1px);box-shadow:0 4px 6px #5a67d833}.room-avatar[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border:3px solid #fff;box-shadow:0 2px 5px #0000001a}.room-avatar-sm[_ngcontent-%COMP%]{width:30px;height:30px;object-fit:cover;border:2px solid #fff;box-shadow:0 1px 3px #0000001a}.room-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:12px;margin-bottom:15px;overflow:hidden;transition:all .3s ease;box-shadow:0 2px 5px #0000000d}.room-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000001a}.room-card-header[_ngcontent-%COMP%]{background-color:#3498db;padding:12px 16px;border-bottom:1px solid #e2e8f0}.room-card-body[_ngcontent-%COMP%]{padding:16px;background-color:#fff}.room-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;color:#4a5568}.room-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;color:#5a67d8;margin-right:8px}.room-actions[_ngcontent-%COMP%]{margin-top:15px;text-align:right}.room-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#5a67d8;border-color:#5a67d8}.room-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#5a67d8;color:#fff}.table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000000d}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{color:#fff}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px;letter-spacing:.5px;background-color:var(--primary-color)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-bottom:1px solid #e2e8f0}.room-row[_ngcontent-%COMP%]{transition:all .2s ease}.room-row[_ngcontent-%COMP%]:hover{background-color:#f7fafc;cursor:pointer;transform:scale(1.01)}.room-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.room-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px!important}.room-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;transition:all .1s}.room-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.pagination-container[_ngcontent-%COMP%]{margin-top:25px}.dropdown-toggle[_ngcontent-%COMP%]{min-width:60px;text-align:center;background-color:#fff;border-color:#4a6cf7;color:#4a6cf7}.dropdown-toggle[_ngcontent-%COMP%]:hover, .dropdown-toggle[_ngcontent-%COMP%]:focus{background-color:#4a6cf7;color:#fff}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f4ff;color:#4a6cf7}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:38px;display:inline-flex;align-items:center;justify-content:center;border-color:#4a6cf7;color:#4a6cf7;transition:all .2s ease}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4a6cf7;color:#fff}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 767.98px){.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:31px}}.room-modal-avatar[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border:4px solid #f7fafc;box-shadow:0 4px 12px #0000001a;border-radius:50%}.room-details[_ngcontent-%COMP%]{margin-top:24px}.detail-item[_ngcontent-%COMP%]{display:flex;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #f1f1f1}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{width:130px;font-weight:600;color:#4a5568}.detail-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5a67d8}.detail-value[_ngcontent-%COMP%]{flex:1;color:#2d3748}.custom-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1050;display:flex;align-items:center;justify-content:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;z-index:1051;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-dialog[_ngcontent-%COMP%]{position:relative;z-index:1052;width:100%;max-width:500px;margin:0 auto}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 10px 25px #00000026;border:none;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid #e2e8f0;background-color:#f7fafc}.modal-title[_ngcontent-%COMP%]{color:#2d3748}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;background-color:#f7fafc}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#5a67d8;border-color:#5a67d8;color:#fff;border-radius:8px;padding:8px 16px;transition:all .3s ease}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#4c51bf;border-color:#4c51bf;transform:translateY(-1px);box-shadow:0 4px 6px #5a67d833}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:8px 12px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#5a67d8;box-shadow:0 0 0 3px #5a67d833}.spinner-border.text-primary[_ngcontent-%COMP%]{color:#5a67d8!important}"]})}}return r})();var G=(()=>{class r{constructor(e){this._HttpClient=e}getFacilities(e){return this._HttpClient.get("/admin/room-facilities",{params:e})}getFacilityById(e){return this._HttpClient.get(`/admin/room-facilities/${e}`)}addNewFacilitie(e){return this._HttpClient.post("/admin/room-facilities",{name:e})}editFacility(e,o){return this._HttpClient.put(`/admin/room-facilities/${o}`,{name:e})}deleteFacility(e){return this._HttpClient.delete(`/admin/room-facilities/${e}`)}static{this.\u0275fac=function(o){return new(o||r)(ee(ne))}}static{this.\u0275prov=Z({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function We(r,_){r&1&&(i(0,"tbody")(1,"tr")(2,"td",42)(3,"div",43)(4,"span",44),a(5,"Loading..."),n()(),i(6,"p",45),a(7,"Loading facilities . . ."),n()()()())}function $e(r,_){if(r&1){let e=C();i(0,"tr",47)(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),v(7,"formatDate"),n(),i(8,"td"),a(9),v(10,"formatDate"),n(),i(11,"td")(12,"button",48),s("click",function(){let t=g(e).$implicit,c=p(3);return f(c.getSpecificFacilityDetails(t._id))}),d(13,"i",49),n(),i(14,"button",50),s("click",function(){let t=g(e).$implicit,c=p(3);return f(c.showEditingFacilitiesModel(t._id))}),d(15,"i",51),n(),i(16,"button",52),s("click",function(){let t=g(e).$implicit,c=p(3);return f(c.deleteFacility(t._id))}),d(17,"i",53),n()()()}if(r&2){let e=_.$implicit;l(2),u(e.name),l(2),u(e.createdBy.userName),l(2),u(S(7,4,e.createdAt)),l(3),u(S(10,6,e.updatedAt))}}function Ye(r,_){if(r&1&&(i(0,"tbody"),b(1,$e,18,8,"tr",46),v(2,"searchFacility"),n()),r&2){let e=p(2);l(),m("ngForOf",O(2,1,e.facilities,e.searchInput))}}function He(r,_){if(r&1&&(B(0),b(1,Ye,3,4,"tbody",15),U()),r&2){let e=p();l(),m("ngIf",!e.isLoading)}}function Ge(r,_){r&1&&(i(0,"div",54)(1,"div",43)(2,"span",44),a(3,"Loading..."),n()(),i(4,"p",55),a(5,"Loading facilities . . ."),n()())}function Je(r,_){if(r&1){let e=C();i(0,"div",57)(1,"div",58)(2,"div",59)(3,"p"),d(4,"i",60),a(5),n(),i(6,"p"),d(7,"i",61),a(8),n(),i(9,"p"),d(10,"i",62),a(11),v(12,"formatDate"),n(),i(13,"p"),d(14,"i",63),a(15),v(16,"formatDate"),n()(),i(17,"div",64)(18,"button",65),s("click",function(){let t=g(e).$implicit,c=p(2);return f(c.getSpecificFacilityDetails(t._id))}),d(19,"i",49),a(20," View "),n(),i(21,"button",66),s("click",function(){let t=g(e).$implicit,c=p(2);return f(c.showEditingFacilitiesModel(t._id))}),d(22,"i",51),a(23," Edit "),n(),i(24,"button",67),s("click",function(){let t=g(e).$implicit,c=p(2);return f(c.deleteFacility(t._id))}),d(25,"i",53),a(26," Delete "),n()()()()}if(r&2){let e=_.$implicit;l(5),h(" ",e.name,""),l(3),h(" ",e.createdBy.userName,""),l(3),h(" ",S(12,4,e.createdAt),""),l(4),h(" ",S(16,6,e.updatedAt),"")}}function Ke(r,_){if(r&1&&(i(0,"div"),b(1,Je,27,8,"div",56),v(2,"searchFacility"),n()),r&2){let e=p();l(),m("ngForOf",O(2,1,e.facilities,e.searchInput))}}function Qe(r,_){if(r&1&&(i(0,"div",78)(1,"div",79)(2,"div",80)(3,"span",81),d(4,"i",82),a(5,"Name:"),n(),i(6,"span",83),a(7),n()(),i(8,"div",80)(9,"span",81),d(10,"i",84),a(11,"Created By:"),n(),i(12,"span",83),a(13),n()(),i(14,"div",80)(15,"span",81),d(16,"i",85),a(17,"Created at:"),n(),i(18,"span",83),a(19),v(20,"formatDate"),n()(),i(21,"div",80)(22,"span",81),d(23,"i",86),a(24,"Updated at:"),n(),i(25,"span",83),a(26),v(27,"formatDate"),n()()()()),r&2){let e=p(2);l(7),u(e.selectedfacility.name),l(6),u(e.selectedfacility.createdBy.userName),l(6),u(S(20,4,e.selectedfacility.createdAt)),l(7),u(S(27,6,e.selectedfacility.updatedAt))}}function Xe(r,_){if(r&1){let e=C();i(0,"div",68)(1,"div",69),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n(),i(2,"div",70)(3,"div",71)(4,"div",72)(5,"h5",73),a(6,"Facility Details"),n(),i(7,"button",74),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n()(),b(8,Qe,28,8,"div",75),i(9,"div",76)(10,"button",77),s("click",function(){g(e);let t=p();return f(t.closeModal())}),a(11,"Close"),n()()()()()}if(r&2){let e=p();l(8),m("ngIf",e.selectedfacility)}}function Ze(r,_){if(r&1){let e=C();i(0,"div",68)(1,"div",69),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n(),i(2,"div",70)(3,"div",71)(4,"div",78)(5,"div",79)(6,"div",87)(7,"label",88),a(8,"Name: "),n(),i(9,"input",89),T("ngModelChange",function(t){g(e);let c=p();return I(c.newNameFacility,t)||(c.newNameFacility=t),f(t)}),n()()()(),i(10,"div",76)(11,"button",90),s("click",function(){g(e);let t=p();return f(t.addFacility())}),a(12,"Add Facility"),n(),i(13,"button",91),s("click",function(){g(e);let t=p();return f(t.closeModal())}),a(14,"Close"),n()()()()()}if(r&2){let e=p();l(9),R("ngModel",e.newNameFacility)}}function et(r,_){if(r&1){let e=C();i(0,"div",68)(1,"div",69),s("click",function(){g(e);let t=p();return f(t.closeModal())}),n(),i(2,"div",70)(3,"div",71)(4,"div",78)(5,"div",79)(6,"div",87)(7,"label",88),a(8,"Name: "),n(),i(9,"input",92),T("ngModelChange",function(t){g(e);let c=p();return I(c.nameEditing,t)||(c.nameEditing=t),f(t)}),n()()()(),i(10,"div",76)(11,"button",90),s("click",function(){g(e);let t=p();return f(t.editFacility(t.nameEditing,t.currentIdFacility))}),a(12,"Edit"),n(),i(13,"button",91),s("click",function(){g(e);let t=p();return f(t.closeModal())}),a(14,"Close"),n()()()()()}if(r&2){let e=p();l(9),m("placeholder",e.currentNameFacility),R("ngModel",e.nameEditing)}}var Re=(()=>{class r{constructor(e,o){this._FacilityService=e,this._ToastrService=o,this.searchInput="",this.facilities=[],this.isLoading=!1,this.showModal=!1,this.showAddFacilityModel=!1,this.showEditingFacility=!1,this.currentPage=1,this.itemsPerPage=10,this.pages=[],this.totalNumOfFacilities=0,this.startItem=1,this.endItem=10,this.newNameFacility="",this.nameEditing="",this.currentNameFacility="",this.currentIdFacility=""}ngOnInit(){this.getAllFacilities()}getAllFacilities(){this.isLoading=!0;let e={size:this.itemsPerPage,page:this.currentPage};this._FacilityService.getFacilities(e).subscribe({next:o=>{o.success&&(this.facilities=o.data.facilities,this.totalNumOfFacilities=o.data.totalCount,this.calculatePagination(),this.updateItemRange()),this.isLoading=!1},error:o=>{console.log(o),this.isLoading=!1}})}getSpecificFacilityDetails(e){this._FacilityService.getFacilityById(e).subscribe({next:o=>{o.success&&(this.selectedfacility=o.data.facility,this.currentNameFacility=o.data.facility.name,this.currentIdFacility=o.data.facility._id,this.showModal=!0)},error:o=>{console.log(o)}})}showAddFacilitiesModel(){this.showAddFacilityModel=!0}showEditingFacilitiesModel(e){this._FacilityService.getFacilityById(e).subscribe({next:o=>{o.success&&(this.selectedfacility=o.data.facility,this.currentNameFacility=o.data.facility.name,this.currentIdFacility=o.data.facility._id,this.nameEditing=o.data.facility.name,this.showEditingFacility=!0)},error:o=>{console.log(o),this._ToastrService.error("Failed to load facility details. Please try again.")}})}addFacility(){this._FacilityService.addNewFacilitie(this.newNameFacility).subscribe({next:e=>{e.success&&(this._ToastrService.success(e.message),this.showAddFacilityModel=!1,this.getAllFacilities())},error:e=>{console.log(e.error.message),this._ToastrService.error(e.error.message)}})}editFacility(e,o){e!=this.currentNameFacility?this._FacilityService.editFacility(e,o).subscribe({next:t=>{t.success&&(this._ToastrService.success(t.message),this.getAllFacilities(),this.showEditingFacility=!1)},error:t=>{console.log(t),this._ToastrService.error(t.error.message)}}):this._ToastrService.error("Failed to update facility. Please try again.")}deleteFacility(e){this._FacilityService.deleteFacility(e).subscribe({next:o=>{console.log(o),o.success&&(this._ToastrService.success("Facility Deleted Successfully"),this.getAllFacilities())},error:o=>{console.log(o),this._ToastrService.error("Failed to delete facility. Please try again.")}})}calculateDiscountedPrice(e,o){return e-e*o/100}closeModal(){this.showModal=!1,this.showAddFacilityModel=!1,this.showEditingFacility=!1}calculatePagination(){this.totalPages=Math.ceil(this.totalNumOfFacilities/this.itemsPerPage),this.pages=Array.from({length:this.totalPages},(e,o)=>o+1)}updateItemRange(){this.startItem=(this.currentPage-1)*this.itemsPerPage+1,this.endItem=Math.min(this.currentPage*this.itemsPerPage,this.totalNumOfFacilities)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.getAllFacilities())}previousPage(){this.currentPage>1&&(this.currentPage--,this.getAllFacilities())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.getAllFacilities())}changePageSize(e){this.itemsPerPage=e,this.currentPage=1,this.getAllFacilities()}static{this.\u0275fac=function(o){return new(o||r)(M(G),M(Y))}}static{this.\u0275cmp=F({type:r,selectors:[["app-facilities"]],decls:91,vars:23,consts:[[1,"filters-container"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-4"],[1,"title"],[1,"font-xl","font-bold","text-center"],[1,"col-md-6","d-flex","flex-column","flex-md-row","justify-content-end","align-items-end"],[1,"search-box","my-3","w-100"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Search using facility name",1,"search-input","w-100",3,"ngModelChange","ngModel"],[1,"btn-add-facility","w-100","d-flex","justify-content-center"],["routerLinkActive","router-link-active",1,"btn","btn-primary","my-3",3,"click"],[1,"table-responsive","mt-4","d-none","d-md-block"],[1,"table","table-hover"],[1,"text-center"],[1,"font-md","font-simibold"],[4,"ngIf"],[1,"pagination-container","d-flex","justify-content-center","align-items-center","mt-4"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"dropdown"],["type","button","id","pageSizeDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","pageSizeDropdown",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"mx-4"],[1,"pagination-arrows"],[1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-chevron-right"],[1,"d-block","d-md-none"],["class","text-center py-4",4,"ngIf"],[1,"d-flex","flex-column","flex-sm-row","align-items-center"],[1,"d-flex","align-items-center","mb-2","mb-sm-0"],[1,"me-2","small"],["type","button","id","pageSizeDropdownMobile","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","pageSizeDropdownMobile",1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"mx-sm-4","small"],[1,"pagination-arrows","mt-2","mt-sm-0"],[1,"btn","btn-sm","btn-outline-secondary","me-2",3,"click","disabled"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],["class","custom-modal",4,"ngIf"],["colspan","5",1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","font-simibold","font-lg"],["class","facility-row text-center",4,"ngFor","ngForOf"],[1,"facility-row","text-center"],[1,"btn","btn-outline-primary","me-2",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-outline-success","me-2",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"text-center","py-4"],[1,"mt-2"],["class","facility-card",4,"ngFor","ngForOf"],[1,"facility-card"],[1,"facility-card-body"],[1,"facility-info"],[1,"fas","fa-building"],[1,"fas","fa-user"],[1,"fas","fa-calendar"],[1,"fas","fa-calendar-alt"],[1,"facility-actions","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-success","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger","me-2",3,"click"],[1,"custom-modal"],[1,"modal-backdrop",3,"click"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","font-simibold","font-lg"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[1,"modal-body"],[1,"facility-details","mt-5"],[1,"detail-item"],[1,"detail-label"],[1,"fas","fa-building","me-2"],[1,"detail-value"],[1,"fa-solid","fa-user","me-2"],[1,"fa-solid","fa-calendar-days","me-2"],[1,"fa-regular","fa-calendar","me-2"],[1,"detail-item","d-flex","justify-content-start","align-items-center"],["for","",1,"font-md","me-3"],["type","text","placeholder","New Facility",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success","me-3",3,"click"],["type","button",1,"btn","btn-danger","me-3",3,"click"],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"Facilities Table Details"),n()()(),i(6,"div",5)(7,"div",6),d(8,"i",7),i(9,"input",8),T("ngModelChange",function(x){return I(t.searchInput,x)||(t.searchInput=x),x}),n()(),i(10,"div",9)(11,"button",10),s("click",function(){return t.showAddFacilitiesModel()}),a(12,"Add New Facility"),n()()()(),i(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13)(17,"th",14),a(18,"Name"),n(),i(19,"th",14),a(20,"Created By"),n(),i(21,"th",14),a(22,"Created at"),n(),i(23,"th",14),a(24,"Updated at"),n(),i(25,"th",14),a(26,"Actions"),n()()(),b(27,We,8,0,"tbody",15)(28,He,2,1,"ng-container",15),v(29,"searchFacility"),n(),i(30,"div",16)(31,"div",17)(32,"span",18),a(33,"Items per page:"),n(),i(34,"div",19)(35,"button",20),a(36),n(),i(37,"ul",21)(38,"li")(39,"a",22),s("click",function(){return t.changePageSize(5)}),a(40,"5"),n()(),i(41,"li")(42,"a",22),s("click",function(){return t.changePageSize(10)}),a(43,"10"),n()(),i(44,"li")(45,"a",22),s("click",function(){return t.changePageSize(20)}),a(46,"20"),n()(),i(47,"li")(48,"a",22),s("click",function(){return t.changePageSize(50)}),a(49,"50"),n()()()(),i(50,"span",23),a(51),n(),i(52,"div",24)(53,"button",25),s("click",function(){return t.previousPage()}),d(54,"i",26),n(),i(55,"button",27),s("click",function(){return t.nextPage()}),d(56,"i",28),n()()()()(),i(57,"div",29),b(58,Ge,6,0,"div",30)(59,Ke,3,4,"div",15),i(60,"div",16)(61,"div",31)(62,"div",32)(63,"span",33),a(64,"Items per page:"),n(),i(65,"div",19)(66,"button",34),a(67),n(),i(68,"ul",35)(69,"li")(70,"a",36),s("click",function(){return t.changePageSize(5)}),a(71,"5"),n()(),i(72,"li")(73,"a",36),s("click",function(){return t.changePageSize(10)}),a(74,"10"),n()(),i(75,"li")(76,"a",36),s("click",function(){return t.changePageSize(20)}),a(77,"20"),n()(),i(78,"li")(79,"a",36),s("click",function(){return t.changePageSize(50)}),a(80,"50"),n()()()()(),i(81,"span",37),a(82),n(),i(83,"div",38)(84,"button",39),s("click",function(){return t.previousPage()}),d(85,"i",26),n(),i(86,"button",40),s("click",function(){return t.nextPage()}),d(87,"i",28),n()()()()(),b(88,Xe,12,1,"div",41)(89,Ze,15,1,"div",41)(90,et,15,2,"div",41),n()),o&2&&(l(9),R("ngModel",t.searchInput),l(18),m("ngIf",t.isLoading),l(),m("ngIf",O(29,20,t.facilities,t.searchInput).length>0),l(8),h(" ",t.itemsPerPage," "),l(15),E("",t.startItem," \u2013 ",t.endItem," of ",t.totalNumOfFacilities,""),l(2),m("disabled",t.currentPage===1),l(2),m("disabled",t.currentPage===t.totalPages),l(3),m("ngIf",t.isLoading),l(),m("ngIf",!t.isLoading),l(8),h(" ",t.itemsPerPage," "),l(15),E("",t.startItem," \u2013 ",t.endItem," of ",t.totalNumOfFacilities,""),l(2),m("disabled",t.currentPage===1),l(2),m("disabled",t.currentPage===t.totalPages),l(2),m("ngIf",t.showModal),l(),m("ngIf",t.showAddFacilityModel),l(),m("ngIf",t.showEditingFacility))},dependencies:[V,z,q,N,D,$,ye,Pe],styles:[".filters-container[_ngcontent-%COMP%]{padding:24px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 2px 10px #0000000d}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:0;font-weight:700}.search-box[_ngcontent-%COMP%]{position:relative;width:60%;margin-right:15px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:12px;color:#3498db}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px 35px;border-radius:20px;border:1px solid #e0e0e0;transition:all .3s ease;font-size:14px}.search-input[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 0 3px #3498db33;outline:none}.search-input[_ngcontent-%COMP%]::placeholder{font-size:14px;color:#95a5a6}.btn-add-facility[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#3498db;border-color:#3498db;padding:10px 16px;font-weight:500;transition:all .3s ease;width:60%}.btn-add-facility[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#2980b9;border-color:#2980b9;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.table[_ngcontent-%COMP%]{margin-top:20px;border-collapse:separate;border-spacing:0;width:100%;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px #0000000d}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;font-weight:600;padding:14px;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;vertical-align:middle;border-top:1px solid #ecf0f1;color:#34495e}.facility-row[_ngcontent-%COMP%]{transition:all .2s ease}.facility-row[_ngcontent-%COMP%]:hover{background-color:#f1f9ff;cursor:pointer;transform:translateY(-2px)}.facility-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease}.facility-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.facility-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px!important}.facility-avatar[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:50%;border:3px solid #ecf0f1}.facility-avatar-sm[_ngcontent-%COMP%]{width:30px;height:30px;object-fit:cover;border-radius:50%}.facility-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;margin-bottom:15px;overflow:hidden;transition:all .3s ease;box-shadow:0 2px 10px #0000000d}.facility-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000001a}.facility-card-header[_ngcontent-%COMP%]{background-color:#3498db;padding:12px 15px;border-bottom:1px solid #e0e0e0;color:#fff}.facility-card-body[_ngcontent-%COMP%]{padding:18px;background-color:#fff}.facility-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;color:#34495e;font-size:14px}.facility-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;color:#3498db;margin-right:8px}.facility-actions[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:space-between}.facility-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s ease}.facility-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#3498db;border-color:#3498db}.facility-actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#3498db;color:#fff}.pagination-container[_ngcontent-%COMP%]{margin-top:25px}.dropdown-toggle[_ngcontent-%COMP%]{min-width:60px;text-align:center;background-color:#fff;border-color:#4a6cf7;color:#4a6cf7}.dropdown-toggle[_ngcontent-%COMP%]:hover, .dropdown-toggle[_ngcontent-%COMP%]:focus{background-color:#4a6cf7;color:#fff}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f4ff;color:#4a6cf7}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:38px;display:inline-flex;align-items:center;justify-content:center;border-color:#4a6cf7;color:#4a6cf7;transition:all .2s ease}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4a6cf7;color:#fff}.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 767.98px){.pagination-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:31px}}.facility-modal-avatar[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border:4px solid #f8f9fa;box-shadow:0 4px 8px #0000001a;border-radius:50%;margin:0 auto 20px;display:block}.facility-details[_ngcontent-%COMP%]{margin-top:20px}.detail-item[_ngcontent-%COMP%]{display:flex;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #ecf0f1}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{width:120px;font-weight:600;color:#34495e}.detail-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.detail-value[_ngcontent-%COMP%]{flex:1;color:#2c3e50}.custom-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1050;display:flex;align-items:center;justify-content:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;z-index:1051;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-dialog[_ngcontent-%COMP%]{position:relative;z-index:1052;width:100%;max-width:500px;margin:0 auto;transform:translateY(0);transition:transform .3s ease}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 10px 30px #0003;overflow:hidden;border:none}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background-color:#f7fafc;border-bottom:#f7fafc}.modal-title[_ngcontent-%COMP%]{color:#000;font-weight:600;margin:0}.btn-close[_ngcontent-%COMP%]{color:#fff;opacity:.8;transition:all .2s ease}.btn-close[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #ecf0f1;display:flex;justify-content:flex-end}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;font-weight:500;transition:all .3s ease}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#3498db;border-color:#3498db;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#2980b9;border-color:#2980b9;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.form-control[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #e0e0e0;padding:10px 12px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 0 3px #3498db33}.spinner-border[_ngcontent-%COMP%]{color:#3498db!important;width:3rem;height:3rem}"]})}}return r})();function tt(r,_){if(r&1&&(i(0,"mat-option",35),a(1),n()),r&2){let e=_.$implicit;m("value",e._id),l(),u(e.name)}}function it(r,_){r&1&&(i(0,"div",36),d(1,"i",37),i(2,"p"),a(3,"Drag and drop images here or click to upload"),n()())}function nt(r,_){if(r&1){let e=C();i(0,"div",40),d(1,"img",41),i(2,"button",42),s("click",function(){let t=g(e).index,c=p(2);return f(c.onRemove(t))}),d(3,"i",43),n()()}if(r&2){let e=_.$implicit;l(),m("src",e,k)}}function ot(r,_){if(r&1&&(i(0,"div",38),b(1,nt,4,1,"div",39),n()),r&2){let e=p();l(),m("ngForOf",e.previewUrls)}}var X=(()=>{class r{constructor(e,o,t,c,x){this._RoomsService=e,this._ToastrService=o,this._ActivatedRoute=t,this._Router=c,this._FacilityService=x,this.isViewMode=!0,this.isEditMode=!0,this.isAddMode=!0,this.files=[],this.previewUrls=[],this.imgSrc=[],this.facilities=[],this.facilityId=[],this.addRoomForm=new W({roomNumber:new P(null,[y.required]),price:new P(null,[y.required]),capacity:new P(null,[y.required]),discount:new P(null,[y.required]),facilities:new P(null,[y.required])}),this.RoomsId=t.snapshot.params.id,this.RoomsId?(this.isEditMode=!0,this.getRoomById(this.RoomsId),t.url.subscribe(w=>{this.isViewMode=w.some(J=>J.path==="view"),this.disableFormControls()}),this._ActivatedRoute.url.subscribe(w=>{this.isEditMode=w.some(J=>J.path==="edit"),this.enableFormControls()})):(this.isAddMode=!0,this.isEditMode=!1,this.isViewMode=!1)}ngOnInit(){this.getFacilities()}onSubmit(e){let o=new FormData;if(o.append("roomNumber",e.value.roomNumber),o.append("price",e.value.price),o.append("capacity",e.value.capacity),o.append("discount",e.value.discount),e.value.facilities&&e.value.facilities.length>0)for(let t of e.value.facilities)t&&o.append("facilities",t);if(this.files.length>0)for(let t of this.files)o.append("imgs",t,t.name);this.RoomsId?this._RoomsService.editRoom(this.RoomsId,o).subscribe({next:t=>{this._Router.navigate(["/admin/rooms-management/rooms"]),this._ToastrService.success(t.message)},error:t=>{console.log(t),this._ToastrService.error(t.error.message)}}):this._RoomsService.addRoom(o).subscribe({next:t=>{t.success&&(this._Router.navigate(["/admin/rooms-management/rooms"]),this._ToastrService.success(t.message))},error:t=>{console.log(t),this._ToastrService.error(t.error.message)}})}getFacilities(){let e={size:300,page:1};this._FacilityService.getFacilities(e).subscribe({next:o=>{this.facilities=o.data?.facilities}})}getRoomById(e){this._RoomsService.getRoomById(e).subscribe({next:o=>{this.roomData=o.data.room},error:o=>{this._ToastrService.error(o.error.message)},complete:()=>{this.roomData?.facilities&&this.roomData.facilities.forEach(o=>this.facilities.push(o)),this.imgSrc=this.roomData?.images||[],this.previewUrls=[...this.imgSrc],this.addRoomForm.patchValue({roomNumber:this.roomData?.roomNumber,price:this.roomData?.price,capacity:this.roomData?.capacity,discount:this.roomData?.discount,facilities:this.roomData.facilities.map(o=>o._id)})}})}disableFormControls(){this.isViewMode&&this.addRoomForm.disable()}enableFormControls(){this.isEditMode&&this.addRoomForm.enable()}onDragOver(e){e.preventDefault(),e.stopPropagation(),e.target.classList.add("dragover")}onDragLeave(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("dragover")}onDrop(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("dragover");let t=e.dataTransfer?.files;t&&this.handleFiles(Array.from(t))}onFileSelected(e){let o=e.target;o.files&&this.handleFiles(Array.from(o.files))}handleFiles(e){let o=e.filter(t=>t.type.startsWith("image/"));this.files.push(...o);for(let t of o){let c=new FileReader;c.onload=x=>{this.previewUrls.push(x.target.result)},c.readAsDataURL(t)}}onRemove(e){e<this.files.length&&this.files.splice(e,1),this.previewUrls.splice(e,1),e<this.imgSrc.length&&this.imgSrc.splice(e,1)}static{this.\u0275fac=function(o){return new(o||r)(M(H),M(Y),M(oe),M(ae),M(G))}}static{this.\u0275cmp=F({type:r,selectors:[["app-manage-room"]],decls:54,vars:10,consts:[["fileInput",""],[1,"card","shadow"],[1,"card-header","bg-primary","text-white","py-3"],[1,"mb-0","font-lg","text-white"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3","width-input","m-auto","g-3"],[1,"col-12","col-md-4"],[1,"form-group"],["for","roomNumber",1,"form-label"],[1,"fa","fa-hashtag"],["type","number","id","roomNumber","formControlName","roomNumber",1,"form-control"],["for","price",1,"form-label"],[1,"fa","fa-dollar"],["type","number","id","price","formControlName","price",1,"form-control"],["for","capacity",1,"form-label"],[1,"fa","fa-user"],["type","number","id","capacity","formControlName","capacity",1,"form-control"],[1,"form-group","mb-3","width-input","m-auto"],[1,"form-label"],[1,"fa","fa-percent"],["type","number","formControlName","discount",1,"form-control"],[1,"fa","fa-list"],["appearance","outline",1,"w-100"],["formControlName","facilities","multiple",""],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-image"],[1,"custom-dropzone",3,"dragover","dragleave","drop"],["type","file","multiple","","accept","image/*",1,"file-input",3,"change"],[1,"dropzone-content"],["class","upload-prompt",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"d-grid","gap-2","width-input","m-auto"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"fa","fa-save"],[3,"value"],[1,"upload-prompt"],[1,"fa","fa-cloud-upload","fa-2x","mb-2"],[1,"image-preview-container"],["class","image-preview",4,"ngFor","ngForOf"],[1,"image-preview"],["alt","Preview",3,"src"],["type","button",1,"remove-btn",3,"click"],[1,"fa","fa-times"]],template:function(o,t){if(o&1){let c=C();i(0,"div",1)(1,"div",2)(2,"h3",3),d(3,"i"),a(4),n()(),i(5,"div",4)(6,"form",5),s("ngSubmit",function(){return g(c),f(t.onSubmit(t.addRoomForm))}),i(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),d(11,"i",10),a(12," Room Number "),n(),d(13,"input",11),n()(),i(14,"div",7)(15,"div",8)(16,"label",12),d(17,"i",13),a(18," Price per Night "),n(),d(19,"input",14),n()(),i(20,"div",7)(21,"div",8)(22,"label",15),d(23,"i",16),a(24," Capacity "),n(),d(25,"input",17),n()()(),i(26,"div",18)(27,"label",19),d(28,"i",20),a(29," Discount "),n(),d(30,"input",21),n(),i(31,"div",18)(32,"label",19),d(33,"i",22),a(34," Facilities "),n(),i(35,"mat-form-field",23)(36,"mat-label"),a(37,"Facilities"),n(),i(38,"mat-select",24),b(39,tt,2,2,"mat-option",25),n()()(),i(40,"div",18)(41,"label",19),d(42,"i",26),a(43," Room Images "),n(),i(44,"div",27),s("dragover",function(w){return g(c),f(t.onDragOver(w))})("dragleave",function(w){return g(c),f(t.onDragLeave(w))})("drop",function(w){return g(c),f(t.onDrop(w))}),i(45,"input",28,0),s("change",function(w){return g(c),f(t.onFileSelected(w))}),n(),i(47,"div",29),b(48,it,4,0,"div",30)(49,ot,2,1,"div",31),n()()(),i(50,"div",32)(51,"button",33),d(52,"i",34),a(53),n()()()()()}o&2&&(l(3),te("fa ",t.isAddMode?"fa-plus-circle":t.isEditMode?"fa-edit":"fa-eye",""),l(),h(" ",t.isAddMode?"Add New Room":t.isEditMode?"Edit Room":"View Room Details"," "),l(2),m("formGroup",t.addRoomForm),l(33),m("ngForOf",t.facilities),l(9),m("ngIf",t.previewUrls.length===0),l(),m("ngIf",t.previewUrls.length>0),l(2),m("disabled",t.addRoomForm.invalid||!t.isAddMode&&!t.isEditMode),l(2),h(" ",t.isAddMode?"Save Room":"Update Room"," "))},dependencies:[V,z,de,N,se,D,ce,me,pe,be,ue,xe,_e],styles:[".card[_ngcontent-%COMP%]{width:95%!important;margin:20px auto;border-radius:12px}@media (min-width: 768px){.card[_ngcontent-%COMP%]{width:85%!important;margin:30px auto}}@media (min-width: 992px){.card[_ngcontent-%COMP%]{width:75%!important;margin:50px auto}}.card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}@media (min-width: 768px){.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}}.width-input[_ngcontent-%COMP%]{width:100%;padding:0 15px}@media (min-width: 768px){.width-input[_ngcontent-%COMP%]{width:90%;padding:0}}@media (min-width: 992px){.width-input[_ngcontent-%COMP%]{width:85%}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.form-control[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]{font-size:.9rem}@media (min-width: 768px){.form-control[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]{font-size:1rem}}.custom-dropzone[_ngcontent-%COMP%]{min-height:150px;background:#f8f9fa;border:2px dashed #dee2e6;border-radius:8px;margin:10px 0;cursor:pointer;position:relative;transition:all .3s ease;padding:15px}@media (min-width: 768px){.custom-dropzone[_ngcontent-%COMP%]{min-height:200px;padding:20px}}.custom-dropzone[_ngcontent-%COMP%]:hover, .custom-dropzone.dragover[_ngcontent-%COMP%]{background:#fff;border-color:#adb5bd}.custom-dropzone[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:0;cursor:pointer}.custom-dropzone[_ngcontent-%COMP%]   .dropzone-content[_ngcontent-%COMP%]{width:100%;height:100%}.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:120px}@media (min-width: 768px){.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]{min-height:160px}}.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d;font-size:1.5rem}@media (min-width: 768px){.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6c757d;text-align:center;font-size:.9rem}@media (min-width: 768px){.custom-dropzone[_ngcontent-%COMP%]   .upload-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}.image-preview-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:10px}@media (min-width: 576px){.image-preview-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}}@media (min-width: 768px){.image-preview-container[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:15px}}@media (min-width: 992px){.image-preview-container[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}.image-preview[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:100%;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#ffffffe6;border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;z-index:1;transition:all .2s ease}.image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#dc3545}.btn-success[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;font-weight:500}.btn-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}@media (min-width: 768px){.btn-success[_ngcontent-%COMP%]{padding:.75rem 1.5rem}}  .mat-mdc-form-field{width:100%}  .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff}  .mat-mdc-form-field .mat-mdc-form-field-infix{padding:.5em 0}"]})}}return r})();var at=[{path:"",redirectTo:"rooms",pathMatch:"full"},{path:"rooms",component:ke,title:"Rooms"},{path:"manage-room/:id",component:X,title:"Edit Room"},{path:"manage-room",component:X,title:"Add Room"},{path:"facilities",component:Re,title:"Facilities"},{path:"**",component:le,title:"Error 404"}],Ie=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=j({type:r})}static{this.\u0275inj=L({imports:[Q.forChild(at),Q]})}}return r})();var Nt=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=j({type:r})}static{this.\u0275inj=L({imports:[ie,Ie,we,ge,fe,ve,he]})}}return r})();export{Nt as RoomsManagementModule};
